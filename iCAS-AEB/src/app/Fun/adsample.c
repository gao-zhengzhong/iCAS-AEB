/*
 * signal_sample.c
 *
 *  Created on: 2015-5-20
 *      Author: zhangguangyao
 */
#define   AD_SAMPLE_GLOBALS
#include "MAIN.h"
/*
*********************************************************************************************************
*                                                MACROS
*********************************************************************************************************
*/

/*
*********************************************************************************************************
*                                               VARIABLES
*********************************************************************************************************
*/
/*-------------------------------CAN0 接收数据数组初始化--------------------------------*/
INT8U   Can0Rec0data[64][8]=
{
{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0}
};
/*--------------------------------CAN1 接收数据数组初始化-----------------------------*/
INT8U   Can1Recdata[10][8]=
{
{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0}
};

/*
*********************************************************************************************************
*                                          FUNCTION PROTOTYPES
*********************************************************************************************************
*/



/*
*********************************************************************************************************
*                                             C ENTRY POINT
*********************************************************************************************************
*/

/*!************************************************************************************
*	@fn	        void SingleADSample_v_g(void)
*	@brief	          单路AD采样函数
*	@author     Matt Zhang
*	@param[in]	AdcCore：0代表ADC0,1代表ADC1；Channel：代表通道
*	@return	    adVal：AD采集实际值
*	@note       在Task3的task3PowerUpTest_v_s()、task3Normal_v_s()中调用
*	@Data       2019-03-12
****************************************************************************************/

INT16U SingleADSample_v_g(INT8U AdcCore,INT8U Channel)
{
	INT16U adVal;
	adVal=0;
	switch(AdcCore)
	{
	case 0:
		    ADC0_vStartSeq2ReqChNum(0,0,0,Channel); //ADC0请求采样
			while(ADC0_uwBusy());
			adVal  = ADC0_uwGetResultData_RESULT_REG_3;//获取寄存器3采样值
		break;
	case 1:
		    ADC1_vStartSeq2ReqChNum(0,0,0,Channel); //ADC1请求采样
			while(ADC1_uwBusy());
			adVal  = ADC1_uwGetResultData_RESULT_REG_3;//获取寄存器3采样值
		break;
	default:
	break;
	}
return adVal;//返回采样值
}


